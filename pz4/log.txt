


insmod: ERROR: could not insert module main.ko: Invalid module format

insmod: ERROR: could not insert module main.ko: Invalid module format

[ 2514.681954] Module removed
[ 2597.099476] Module loaded
[ 2600.234519] Module removed
[ 2922.186945] Module loaded
[ 3102.849632] Module removed
[ 3555.721662] Module loaded
[ 7427.262876] Module removed
[ 7430.202688] Driver loaded, major=237
[ 8660.776301] Device opened
[ 8660.776451] Device closed
[11070.120248] Driver removed
[11076.552624] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11135.032791] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11284.184188] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11326.458187] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11400.692712] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11449.932518] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11666.382066] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11866.399260] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330
[11918.476627] module: x86/modules: Skipping invalid relocation target, existing value is nonzero for type 1, loc 000000002cfed0f4, val ffffffffc07e4330

make: Entering directory '/usr/src/linux-headers-5.15.0-163-generic'
scripts/Makefile.build:44: PWD/Makefile: No such file or directory
make[1]: *** No rule to make target 'PWD/Makefile'.  Stop.
make: *** [Makefile:1930: PWD] Error 2
make: Leaving directory '/usr/src/linux-headers-5.15.0-163-generic'

make -C /lib/modules/5.15.0-163-generic/build M=/home/drivers/drivers/pz4 CFLAGS_MODULE="-fPIC" modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-163-generic'
  CC [M]  /home/drivers/drivers/pz4/main.o
cc1: error: code model kernel does not support PIC mode
make[2]: *** [scripts/Makefile.build:297: /home/drivers/drivers/pz4/main.o] Error 1
make[1]: *** [Makefile:1930: /home/drivers/drivers/pz4] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-163-generic'
make: *** [Makefile:4: all] Error 2
5.15.0-163-generic
Linux version 5.15.0-163-generic (buildd@lcy02-amd64-091) (gcc (Ubuntu 11.4.0-1ubuntu1~22.04.2) 11.4.0, GNU ld (GNU Binutils for Ubuntu) 2.38) #173-Ubuntu SMP Tue Oct 14 17:51:00 UTC 2025
gcc (Ubuntu 11.4.0-1ubuntu1~22.04.2) 11.4.0
Copyright (C) 2021 Free Software Foundation, Inc.
This is free software; see the source for copying conditions.  There is NO
warranty; not even for MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.


make -C /lib/modules/5.15.0-163-generic/build M=/home/drivers/drivers/pz4 CFLAGS_MODULE="-fPIC" modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-163-generic'
  CC [M]  /home/drivers/drivers/pz4/driver.o
cc1: error: code model kernel does not support PIC mode
make[2]: *** [scripts/Makefile.build:297: /home/drivers/drivers/pz4/driver.o] Error 1
make[1]: *** [Makefile:1930: /home/drivers/drivers/pz4] Error 2
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-163-generic'
make: *** [Makefile:4: all] Error 2
