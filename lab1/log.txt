make -C /lib/modules/5.15.0-164-generic/build M=/home/drivers/drivers/lab1 modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-164-generic'
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-164-generic'
sudo insmod main.ko


записали 0, прочитали 0
записали 1, прочитали 1
записали 2, прочитали 2
записали 3, прочитали 3
записали 4, прочитали 4
записали 5, прочитали 5
записали 6, прочитали 6
записали 7, прочитали 7
записали 8, прочитали 8
записали 9, прочитали 9

Гистограмма (количество вызовов read): 10
**********

make -C /lib/modules/5.15.0-164-generic/build M=/home/drivers/drivers/lab1 modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-164-generic'
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-164-generic'



make -C /lib/modules/5.15.0-164-generic/build M=/home/drivers/drivers/lab1 modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-164-generic'
  CC [M]  /home/drivers/drivers/lab1/main.o
/home/drivers/drivers/lab1/main.c: In function ‘dev_read’:
/home/drivers/drivers/lab1/main.c:41:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   41 |     s64 read_time_ns = ktime_get_ns();
      |     ^~~
  MODPOST /home/drivers/drivers/lab1/Module.symvers
  CC [M]  /home/drivers/drivers/lab1/main.mod.o
  LD [M]  /home/drivers/drivers/lab1/main.ko
  BTF [M] /home/drivers/drivers/lab1/main.ko
Skipping BTF generation for /home/drivers/drivers/lab1/main.ko due to unavailability of vmlinux
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-164-generic'

make -C /lib/modules/5.15.0-164-generic/build M=/home/drivers/drivers/lab1 modules
make[1]: Entering directory '/usr/src/linux-headers-5.15.0-164-generic'
  CC [M]  /home/drivers/drivers/lab1/main.o
/home/drivers/drivers/lab1/main.c: In function ‘dev_read’:
/home/drivers/drivers/lab1/main.c:48:5: warning: ISO C90 forbids mixed declarations and code [-Wdeclaration-after-statement]
   48 |     size_t bin = delta_us / 50;
      |     ^~~~~~
  MODPOST /home/drivers/drivers/lab1/Module.symvers
  CC [M]  /home/drivers/drivers/lab1/main.mod.o
  LD [M]  /home/drivers/drivers/lab1/main.ko
  BTF [M] /home/drivers/drivers/lab1/main.ko
Skipping BTF generation for /home/drivers/drivers/lab1/main.ko due to unavailability of vmlinux
make[1]: Leaving directory '/usr/src/linux-headers-5.15.0-164-generic'
